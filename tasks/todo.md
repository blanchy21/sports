# Phase 4: Hive Account Creation Service

## Tasks

- [x] **A1** Key encryption utility (`src/lib/hive/key-encryption.ts`)
- [x] **B1** Username validation utilities (`src/lib/hive/username.ts`)
- [x] **C1** Account creation service (`src/lib/hive/account-creation.ts`)
- [x] **D1** Username check API route (`src/app/api/hive/check-username/route.ts`)
- [x] **D2** Account creation API route (`src/app/api/hive/create-account/route.ts`)
- [x] **E1** Username picker page (`src/app/onboarding/username/page.tsx`)
- [x] **F1** Bridge hook: pass through hiveUsername
- [x] **F2** Auth page redirect logic
- [x] **F3** NextAuth JWT: refresh hiveUsername
- [x] **F4** Environment variables

## Verification
- [x] `npx tsc --noEmit` — zero errors
- [x] `npx eslint` — clean on new/modified files
- [ ] Manual flow test with real env vars
